"use strict";$(document).ready(function(){var t=location.search.substring(1).split("=")[1],r=$(".pic-preview .spic"),o=$(".pic-preview .bf img"),n=$(".pic-preview .spic .sf"),i=$(".pic-preview .bf"),e=$(".pic-preview .picList ul li img"),s=null,c=[],a=[],p=function(t,i,e){var r=new Date;r.setDate(r.getDate()+e),document.cookie=t+"="+encodeURIComponent(i)+";expires="+r},h=function(t){var i=decodeURIComponent(document.cookie).split("; "),e=!0,r=!1,o=void 0;try{for(var n,s=i[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var c=n.value.split("=");if(t===c[0])return c[1]}}catch(t){r=!0,o=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw o}}};$.ajax({type:"post",url:"http://10.31.157.56/JS-1907/project1/php/details.php",data:{sid:t},dataType:"json",success:function(t){console.log(t);var i=t.urls.split("，");r.children("img").attr("src",t.url),r.children("img").attr("sid",t.sid),o.attr("src",t.url),$(".pic-preview .picList img").eq(0).attr("src",i[0]),$(".pic-preview .picList img").eq(1).attr("src",i[1]),$(".pic-preview .picList img").eq(2).attr("src",i[2]),$(".product-info .summary-name h1").html(t.title),$(".product-info .summary-name p").html(t.info),$(".product-info .summary-price strong").html(t.price),$(".summary-other .selected span").eq(0).html(t.standard_price),$(".summary-other .selected span").eq(1).html(t.standard_num),$(".summary-other .right td").eq(0).html(t.ori_address),$(".summary-other .right td").eq(1).html(t.good_id),$(".summary-other .right td").eq(2).html(t.brand)},error:function(t){console.log(t)}}),r.hover(function(t){n.show(),i.show(),r.on("mousemove",function(t){!function(t){var i=t.pageX-r.offset().left-n.width()/2,e=t.pageY-r.offset().top-n.height()/2;i<=0?i=0:i>=r.width()-n.width()&&(i=r.width()-n.width());e<=0?e=0:e>=r.height()-n.height()&&(e=r.height()-n.height());n.css({left:i,top:e}),o.css({left:-i*s,top:-e*s})}(t)})},function(){n.hide(),i.hide()}),n.css({width:r.width()*i.width()/o.width(),height:r.height()*i.height()/o.height()}),s=o.width()/i.width(),e.hover(function(){var t=$(this).attr("src");r.children("img").attr("src",t),o.attr("src",t)}),$(".addcart").on("click",function(){var t=$(this).parents(".product-intro").find(".spic").find("img").attr("sid");if(h("cookiesid")&&h("cookienum")&&(c=h("cookiesid").split(","),a=h("cookienum").split(",")),-1!==$.inArray(t,c)){var i=parseInt(a[$.inArray(t,c)])+parseInt($("#p_number").val());a[$.inArray(t,c)]=i,p("cookienum",a.toString(),10)}else c.push(t),p("cookiesid",c.toString(),10),a.push($("#p_number").val()),p("cookienum",a.toString(),10);alert("添加购物车成功")}),$(".increase").on("click",function(){var t=parseInt($("#p_number").val());t++,$("#p_number").val(t)}),$(".decrease").on("click",function(){var t=parseInt($("#p_number").val());--t<=0&&(t=0),$("#p_number").val(t)})});